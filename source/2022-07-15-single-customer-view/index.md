---
title: Single Customer View
tags: Genesys Cloud, Developer Engagement
date: 2022-07-15
author: andrew.johnson
category: 7
---

Single Customer View is an upcoming Genesys Cloud feature that gives agents a view of all the interactions that a customer has had with your organization. A primary goal of this feature is to associate all interactions with Contacts. This facilitates building a single customer view so that Genesys Cloud agents can easily answer the questions: “Who am I talking to?” and “How have they interacted with my organization in the past?” 

Several new concepts are being added to the platform API to support this new feature, and we explore them in this blog post together. Remember that these new concepts should be non-disruptive to existing organizations. You are not required to engage with most of these changes until your organization uses some of the new features described in the following information.

## Identifiers

Until now, to look up contacts by identifiers, like phone number, email address, etc., the [`GET /api/v2/externalcontacts/reversewhitepageslookup`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#get-api-v2-externalcontacts-reversewhitepageslookup "Goes to the External Contacts APIs page") endpoint has been used. This endpoint returns a list of contacts that contain an identifier with the given lookup string.

With the introduction of identity resolution functionality to Genesys Cloud, External Contacts introduces a new object called an Identifier. An identifier has a type and value that points to one contact. It looks up its identifier and returns the contact when the platform resolves an identifier for interacting with a contact. We say it has claimed the identifier for that contact.

When contacts are created using the [`POST /api/v2/externalcontacts/contacts`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#post-api-v2-externalcontacts-contacts "Goes to the External Contacts APIs page") endpoint, the platform attempts to claim Identifiers that correspond to each named identifier field, for example, cellPhone, workEmail, etc. If another contact claims any identifier, it remains claimed by that contact. As contacts are edited via the [`PUT`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#put-api-v2-externalcontacts-contacts--contactId- "Goes to the External Contacts APIs page") and [`DELETE`](/commdigital/externalcontacts/externalcontacts-apis#delete-api-v2-externalcontacts-contacts--contactId-) endpoints, the identifiers corresponding to the contact are claimed/released appropriately. 

For more information about identifiers and their associated operations, see [Identifiers](https://developer.genesys.cloud/commdigital/externalcontacts/contact-merges#identifiers "Goes to the Identifiers page") in the Genesys Cloud Developer Center.

## Contact types

The platform receives a new interaction on a supported channel when it resolves the identifiers for that contact. For example, phone number, email address, social media identifier, etc. A contact is automatically created if there is no match. It then sets the `participant.externalContactId` field on the [conversations APIs](https://developer.genesys.cloud/routing/conversations/conversations-apis#get-api-v2-conversations--conversationId- "Goes to the Conversations APIs 'age") to the contact ID that is found/created.

These autogenerated contacts need to be distinguished from the contacts that your organization creates explicitly. To do this, we are introducing three types of contacts and a new `type` field on the Contact object.

- **Curated** Contacts you already know (and hopefully love). These are created via the API, the web application/desktop app, or CSV/Salesforce imports. They never age out; you are responsible for their full lifecycle and eventual deletion, just as you have always been.
- **Identified** Contacts are a new kind of automatically generated contact. These contacts contain some Personally Identifiable Information (PII) and automatically age out of the system to help platform customers comply with data privacy laws and follow the data-minimization principle.
- **Ephemeral** Contacts are also a kind of automatically generated contact. However, these contacts contain no PII; they are created when only there are no identifiers or just a cookie associated with customer interaction. Just like identified contacts, these automatically age out of the system.

None of the autogenerated contacts appear in the search results, list/scan endpoints, or reverse whitepages lookups. This keeps them out of the way of existing users.

Autogenerated contacts may be promoted to curated contacts permanently to keep them in the curated set. You may do this using the new [`POST /api/v2/externalcontacts/contacts/{contactId}/promotion`](https://developer.genesys.cloud/platform/preview-apis#post-api-v2-externalcontacts-contacts--contactId--promotion "Goes to the Preview APIs page") API endpoint or the appropriate buttons in the Genesys Cloud web application. In that case, the promoted contact appears in all the places in the API that contacts currently do and you assume responsibility for their lifetime and compliance the same way you would any other contact you create.

## Merging contact

Identity resolution can never be foolproof. A customer may have multiple devices that they use to contact your organization. Unless those devices have been assigned to the contact that represents the person, or the interaction contains extra information that can be used to associate it with an existing contact, the platform assumes that a new device is a new person and create a new, potentially duplicate contact. When this happens, manual intervention is needed on the agent's part.

To clean up these duplicate contacts that represent the same individual, you can merge them using the [`POST /api/v2/externalcontacts/merge/contacts`](https://developer.genesys.cloud/platform/preview-apis#post-api-v2-externalcontacts-merge-contacts "Goes to the Preview APIs page") endpoint. Merging two contacts creates a new “canonical” contact and joins all three into a “merge set.” The canonical record holds the current state of the contact that represent the merge set. The other non-canonical contacts in the merge set are called ancestor contacts and are read-only. You can learn more about how to merge contacts and the types of contacts that may be merged in our [Merge contacts](https://developer.genesys.cloud/commdigital/externalcontacts/contact-merges#merging-contacts "Goes to the Merge contacts page") in the Genesys Cloud Developer Center.

When an interaction happens, the platform resolves its identifiers to the current canonical contact mapped to those identifiers and associates the interaction/participant with that contact ID. Merging two contacts does not update the historical interaction records that were associated with the now-ancestor contacts; those interactions remain associated with the ancestor contacts.

This can present some challenges for organizations that integrate with the Genesys Cloud platform. If your organization's integrations need to send data to a contact by its ID, that system would need to know the canonical contact ID to send the update to the correct record. While this can be done, it would be rather painful to force all users of this feature to update their integrations first.

To ease the transition for such organizations, the API transparently redirects some API operations made against ancestor contacts to the canonical contact of its merge set. Any of the following endpoints exhibit this behavior:

- [`GET /api/v2/externalcontacts/contacts/{contactId}`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#get-api-v2-externalcontacts-contacts--contactId- "Goes to the External Contacts APIs page")
- [`PUT /api/v2/externalcontacts/contacts/{contactId}`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#put-api-v2-externalcontacts-contacts--contactId- "Goes to the External Contacts APIs page")
- [`DELETE /api/v2/externalcontacts/contacts/{contactId}`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#delete-api-v2-externalcontacts-contacts--contactId- "Goes to the External Contacts APIs page")
- [`POST /api/v2/externalcontacts/bulk/contacts`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#post-api-v2-externalcontacts-bulk-contacts "Goes to the External Contacts APIs page")
- [`POST /api/v2/externalcontacts/bulk/contacts/update`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#post-api-v2-externalcontacts-bulk-relationships-update "Goes to the External Contacts APIs page")
- [`POST /api/v2/externalcontacts/bulk/contacts/remove`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#post-api-v2-externalcontacts-bulk-contacts-remove "Goes to the External Contacts APIs page")


Effectively, all contact IDs in the merge set become aliases to the same canonical contact record. The behavior of the [`PUT /api/v2/externalcontacts/conversations/{conversationId}`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#put-api-v2-externalcontacts-conversations--conversationId- "Goes to the External Contacts APIs page") endpoint does not change. Specifically, it links the participant to the exact contact ID given; it does not look up the canonical contact for the given contact.

For more information about the behavior of ancestor contacts, see [Manipulating ancestor contacts](https://developer.genesys.cloud/commdigital/externalcontacts/contact-merges#manipulating-ancestor-contacts "Goes to the Manipulating ancestor contacts page") in the Genesys Cloud Developer Center.  

## Analytics

Previously, analytics queries could filter all records for a specific individual by filtering on a single `externalContactId`. Now, if you want to filter on a single logical individual, for example, to retrieve their interaction history, you must first obtain one of the `externalContactId`s for the individual, fetch its contact record using [`GET /api/v2/externalcontacts/contacts/{contactId}`](https://developer.genesys.cloud/commdigital/externalcontacts/externalcontacts-apis#get-api-v2-externalcontacts-contacts--contactId- "Goes to the External Contacts APIs page") endpoint, then retrieve the `mergeSet` field from the response. Using this complete list of merged `externalContactId`s, filter your analytics queries by fetching records matching any IDs in the `mergeSet`. If you group analytics records by `externalContactId`, you must map the `externalContactId` to its `mergeSet` as described in the preceding fields and group all records whose `externalContactId`s are in the same `mergeSet`.

The `externalContacts:identity:merge` permission controls access to the merge action.
This is only required if your organization contains merged contacts. At this time, merging is only done by explicit user actions, so the only way that any merged contacts are present is if a user or client in your organization performs these actions.

## What does this mean?

Merging helps refine your organization's set of contacts over time and makes it easier to see the various interactions a customer has had. Well, not much until your organization begins to use the merging features. However, even without using the merge feature, your organization's agents can still receive more visibility into your customer's past interactions using the Customer Journey tab.

Merging is gated behind separate permission and endpoint, so it does not happen unless your organization explicitly permits agents to do it. Autogenerated contacts do not appear in search results or listing endpoints and should be largely invisible to most existing integrations. Before you start using this functionality, make sure to consider the impact as presented in this post.

## Final thoughts

Single Customer View is a feature that we are excited to deliver to our users. Allowing agents to see all of the touchpoints customers have had with your organization that leads to more empathetic service experiences and improves their interactions with your business. We have worked hard to make it easy to use while keeping API compatibility with existing integrations. As your organization begins to use this feature, we would love to hear about your experiences!
